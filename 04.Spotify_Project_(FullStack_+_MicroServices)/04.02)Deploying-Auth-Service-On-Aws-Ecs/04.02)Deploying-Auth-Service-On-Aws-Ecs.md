```bash
# System Prerequisites Check & Dockerfile Setup
➡️ Make sure docker and awscli is installed in system
➡️ In auth-service folder create Dockerfile and .dockerignore
```

```dockerfile
# Dockerfile for Node.js Auth Service
# Base image: Node.js 22 Alpine (lightweight Linux)
FROM node:22-alpine

# Set working directory inside container
WORKDIR /app

# Copy package files first for better layer caching
COPY package*.json ./

# Install dependencies
RUN npm install

# Copy all source code
COPY . .

# Expose the port the app runs on
EXPOSE 3000

# Command to start the application
CMD ["node", "server.js"]
```

```markdown
# Deployment Architecture
➡️ We will run on ECS and push in ECR
```

```bash
# Docker Build Command
# Build for AMD64 architecture (EC2 compatible) and tag the image
# --platform: Target Linux AMD64 for AWS compatibility
# -t: Tag the image with service name
# --load: Make the built image available locally
docker buildx build --platform linux/amd64 -t <service-name> . --load
```

```markdown
# AWS IAM Setup (Security Best Practices)
➡️ Make sure to setup AWS account
➡️ Do not do anything with root user
➡️ In user group create a new group
➡️ Add some permissions like:
   - AmazonEC2ContainerRegistryFullAccess
   - AmazonEC2FullAccess  
   - AmazonECS_FullAccess
   - AmazonVPCFullAccess
➡️ Create a user with selected group...
➡️ Find enable console access in user > security
➡️ You'll see the URL, username and password...give it to the user or use it for yourself with different profile or browser or system
```

```markdown
# ECR Repository Creation
➡️ Then after logging with that user
➡️ Go to all services then Elastic Container Registry, make sure the region is selected the closest, create repository
➡️ Name it
➡️ After creating...you will get the commands to run, git bash recommended with macOS command
```

```bash
# AWS CLI Configuration
# Go to root user and go in users....scroll down in security and find create access keys
# Select CLI and next and next to get the Access key and Secret access key
# Open terminal/gitbash
aws configure  # Then paste keys and region code when prompted
```

```markdown
# Image Push to ECR
➡️ In project terminal...paste the first login command
➡️ We already built
➡️ Make sure the build service name is same as the repo name
➡️ With 3rd command tag it
➡️ 4th command pushes it
```

```markdown
# VPC Configuration
➡️ Go to console > view all service > VPC
➡️ VPC and more
➡️ Name project
➡️ Number of private subnet is 0
➡️ Go to your VPC
```

```markdown
# ECS Cluster Setup
➡️ Go to console > view all service > Elastic Container Service
➡️ Create a cluster
```

```markdown
# IAM Role for ECS Tasks
➡️ Go back to root to use IAM
➡️ Go to roles, create a new role...use case elastic container service and Elastic container service task
➡️ Next is to select a permission..AmazonECSTaskExecutionRolePolicy and next
```

```markdown
# Task Definition Configuration
➡️ Go back to the repo from user to copy the repo URI
➡️ Go to user console > view all service > Elastic Container Service
➡️ Go to task definition
➡️ Create a task definition
➡️ Task roles is the role that we created
➡️ Paste image URI too
➡️ Add all the Environmental variables
➡️ And create
```

```markdown
# Service Deployment & Load Balancer Setup
➡️ Go to task definition
➡️ Select the task
➡️ Deploy > create service
➡️ Task definition to latest
➡️ Keep other
➡️ And in networking select the VPC that we created
➡️ Select public subnet
➡️ Security name it..
➡️ Use the http with 80 and custom with tcp and 3000
➡️ Use load balancing...selected container...name the load balancer...create a new target group...use - to create name...
```

```markdown
# Access the Deployed Service
➡️ Go back to EC2, load balancer, copy the DNS name to access your server
```